import QtQuick 2.12
import QtQuick.Window 2.12
import QtGraphicalEffects 1.12
import QtQuick.Shapes 1.12

Item{
    visible: true
    width:600
    height: 600
    //多重采样抗锯齿
    layer.enabled: true
    layer.samples: 8

//    Image {
//        id: bug
//        source: "qrc:/Image/image/ThresholdMask_threshold1.png"
//        sourceSize: Qt.size(parent.width, parent.height)
//        smooth: true
//        visible: false
//    }

//    Image {
//        id: mask
//        source: "qrc:/Image/image/butterfly.png"
//        sourceSize: Qt.size(parent.width, parent.height)
//        smooth: true
//        visible: false
//    }

    Rectangle{
        id:testRec
        color: "blue"
        width: parent.width
        height: parent.height
        smooth: true
        visible: false
    }

    Shape {
        id:spTest
        visible: false
        anchors.fill: parent
        //平滑处理
        smooth: true
        //反走样抗锯齿
        antialiasing: true
        ShapePath {
            fillColor: "red"
            startX: 0
            startY: 0
            fillRule: ShapePath.WindingFill
            PathLine {
                x: 600
                y: 0
            }
            //        PathArc {
            //            x: 120
            //            y: 120
            //            radiusX: 140
            //            radiusY: 140
            //            useLargeArc: true
            //        }
            PathLine {
                x: 600
                y: 600
            }
            PathLine {
                x: 0
                y: 600
            }

        }
    }
    NumberAnimation {
        id:animTest
        targets: omTest
        properties: "opacity"
        from: 1
        to: 0.35
        duration: 2000
    }

    NumberAnimation {
        id:animTest2
        targets: omTest
        properties: "opacity"
        from: 0
        to: 1
        duration: 2000
    }


    OpacityMask {
        id:omTest
        anchors.fill: testRec
        transform: [
            //origin指定缩放中心、axis指定坐标轴
            Scale {origin.x: 300; origin.y: 300;xScale:omTest.opacity;yScale:omTest.opacity},
            Rotation {origin.x: 300; origin.y: 300;axis { x: 1; y: 1; z: 0 } angle: 60-60*omTest.opacity }
        ]
        source: testRec
        maskSource:spTest /*mask*/
        visible: {if(1){animTest.restart();}else{animTest2.restart()}return true;}
    }

}

